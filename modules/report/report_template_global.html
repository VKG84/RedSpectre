<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Rapport Global de Pentest</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        h1, h2, h3 { color: #2c3e50; }
        pre { background-color: #f4f4f4; padding: 10px; border: 1px solid #ccc; white-space: pre-wrap; }
        .section { margin-bottom: 40px; border-bottom: 2px solid #ccc; padding-bottom: 20px; }
    </style>
</head>
<body>
    <h1>Rapport Global de Pentest</h1>
    <p><strong>Date :</strong> {{ date }}</p>

    {% for entry in results %}
    <div class="section">
        <h2>Cible : {{ entry.target }}</h2>
        <p><strong>Score de sécurité :</strong> {{ entry.score }}/100</p>
        <h3>Recommandations</h3>
        <ul>
        {% for rec in entry.recommendations %}
            <li>{{ rec }}</li>
        {% endfor %}
        </ul>
        <h3>Reconnaissance Passive</h3>
        <pre>{{ entry.recon }}</pre>
        <h3>Scan Réseau</h3>
        <pre>{{ entry.scan }}</pre>
        <h3>Scan de Vulnérabilités (Nuclei)</h3>
        <pre>{{ entry.nuclei }}</pre>
    </div>
    {% endfor %}
</body>
</html>